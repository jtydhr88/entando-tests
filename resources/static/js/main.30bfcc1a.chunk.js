(window["webpackJsonpdw-news-card-config"]=window["webpackJsonpdw-news-card-config"]||[]).push([[0],{24:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Error during server connection"},"common":{"contentTitle":"Content Type field","categoryTitle":"Category field","widgetName":"News update","name":"Name","value":"Value","loading":"Loading...","notAuthenticated":"User is not authenticated."}}')},27:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n(17),c=n(18),o=n(25),i=n(26),u=n(1),s=n(0),l=n.n(s),d=n(19),p=n.n(d),f=n(2),b=n.n(f),w=n(4),v=n(14),h=n(12),m=l.a.createContext(null),y=function(){return{headers:new Headers({Authorization:"Bearer ".concat(window&&window.entando&&window.entando.keycloak&&window.entando.keycloak.authenticated?window.entando.keycloak.token:""),"Content-Type":"application/json"})}},k=function(){var e=Object(w.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:if(204!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",{});case 5:return e.abrupt("return",a.status>=200&&a.status<300?a.json():Promise.reject(new Error(a.statusText||a.status)));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(w.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("api/categories"),a=Object(u.a)(Object(u.a)({},y()),{},{method:"GET"}),e.abrupt("return",k(n,a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(w.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t,"/").concat("api/contentTypes"),a=Object(u.a)(Object(u.a)({},y()),{},{method:"GET"}),e.abrupt("return",k(n,a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function g(e){var t=e.serviceUrl,n=e.selectedCategory,a=e.selectedContentType,r=e.updateState,c=Object(h.b)(),o=c.t,i=c.i18n,u=Object(s.useState)([]),d=Object(v.a)(u,2),p=d[0],f=d[1],y=Object(s.useState)([]),k=Object(v.a)(y,2),g=k[0],E=k[1],C=Object(s.useContext)(m),T=C.initialized&&C.authenticated;return Object(s.useEffect)((function(){function e(){return(e=Object(w.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t);case 2:n=e.sent,f(n.payload);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}T&&function(){e.apply(this,arguments)}()}),[T]),Object(s.useEffect)((function(){function e(){return(e=Object(w.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:n=e.sent,E(n.payload);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}T&&function(){e.apply(this,arguments)}()}),[T]),console.log(C),l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,o("common.contentTitle")),l.a.createElement("select",{name:"selectedContentType",value:a,onChange:function(e){r({selectedContentType:e.target.value})}},g.map((function(e){return l.a.createElement("option",{key:e.code,value:e.code},e.name)}))),l.a.createElement("h3",null,o("common.categoryTitle")),l.a.createElement("select",{name:"selectedCategory",value:n,onChange:function(e){r({selectedCategory:e.target.value})}},p.map((function(e){return l.a.createElement("option",{key:e.code,value:e.code},e.titles[i.language])}))))}g.defaultProps={onError:function(){},serviceUrl:""};var E=n(10),C=n(13),T={en:n(24)},x=Object.keys(T).reduce((function(e,t){return Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},t,Object(E.a)({},"translation",T[t])))}),{}),S=(C.a.t,function(e){!function(e,t){C.a.use(h.a).init({defaultNs:"translation",interpolation:{escapeValue:!1},resources:x,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"en")}),P=function(){return window&&window.entando&&window.entando.keycloak&&Object(u.a)(Object(u.a)({},window.entando.keycloak),{},{initialized:!0})||{initialized:!1}},z="service-url",L="locale",A=function(e){Object(c.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).mountPoint=null,e.unsubscribeFromKeycloakEvent=null,e.keycloak=P(),e.updateState=e.updateState.bind,e.state={selectedCategory:"",selectedContentType:""},e}return Object(r.a)(n,[{key:"config",get:function(){return this.state},set:function(e){return console.log(e),this.setState(e)}},{key:"updateState",value:function(e){this.setState(e)}},{key:"connectedCallback",value:function(){var e,t,n=this;this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint),this.keycloak=Object(u.a)(Object(u.a)({},P()),{},{initialized:!0}),this.unsubscribeFromKeycloakEvent=(e="keycloak",t=function(){n.keycloak=Object(u.a)(Object(u.a)({},P()),{},{initialized:!0}),n.render()},window.addEventListener(e,t),function(){window.removeEventListener(e,t)}),this.render()}},{key:"render",value:function(){var e=this,t=this.getAttribute(z)||"/news-content",n=this.state,a=this.updateState,r=this.getAttribute(L);S(r);var c=l.a.createElement(g,Object(u.a)({onError:function(t){var n=new CustomEvent("".concat("news.updates.config.","error"),{details:{error:t}});e.dispatchEvent(n)},updateState:a,serviceUrl:t},n));p.a.render(l.a.createElement(m.Provider,{value:this.keycloak},c),this.mountPoint)}},{key:"disconnectedCallback",value:function(){this.unsubscribeFromKeycloakEvent&&this.unsubscribeFromKeycloakEvent()}}]),n}(Object(i.a)(HTMLElement));customElements.define("dw-news-card-config",A)}},[[27,1,2]]]);
//# sourceMappingURL=main.30bfcc1a.chunk.js.map