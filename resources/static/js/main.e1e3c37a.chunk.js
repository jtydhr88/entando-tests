(this["webpackJsonpvideo-conferencing-widget"]=this["webpackJsonpvideo-conferencing-widget"]||[]).push([[0],{29:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Error during server connection"},"notifications":{"widgetTitle":"Notifications","unread":"You have {{totalUnRead}} unread messagess","new":"New","viewAll":"View All"},"contacts":{"widgetTitle":"Contacts"},"common":{"name":"Name","value":"Value","loading":"Loading...","notAuthenticated":"User is not authenticated."}}')},30:function(e){e.exports=JSON.parse('{"error":{"dataLoading":"Errore durante la connessione al server"},"notifications":{"widgetTitle":"Notifiche","unread":"Hai {{totalUnRead}} messaggi non letti","new":"Nuovi","viewAll":"Mostra tutti"},"contacts":{"widgetTitle":"Contatti"},"common":{"contentTitle":"Content Type field","categoryTitle":"Category field","widgetName":"Cronache recenti","name":"Nome","value":"Valore","loading":"Caricamento in corso...","notAuthenticated":"L\'utente non \xe8 autenticato."}}')},35:function(e,t,n){},84:function(e,t,n){"use strict";n.r(t);n(35);var a=n(2),i=n(4),o=n(5),r=n(6),c=n(8),s=n(1),d=n(15),u=n(34),l=n(27),f=n.n(l),h=n(22),m=n.n(h),p=n(0),g=Object(s.createContext)(null),v="keycloak",b=function(){var e=window.entando||{},t=!!e.keycloak;return t?Object(a.a)(Object(a.a)({},e.keycloak),{},{initialized:t}):{initialized:t}};function j(e){var t=e.children,n=Object(s.useState)(Object(a.a)(Object(a.a)({},b()),{},{initialized:!0})),i=Object(d.a)(n,2),o=i[0],r=i[1];return Object(s.useEffect)((function(){var e=function(){r(Object(a.a)(Object(a.a)({},b()),{},{initialized:!0}))};return window.addEventListener(v,e),function(){window.removeEventListener(v,e)}}),[]),Object(p.jsx)(g.Provider,{value:Object(a.a)(Object(a.a)({},o),{},{get user(){return o?{preferredName:m()(o,"idTokenParsed.preferred_username"),email:m()(o,"idTokenParsed.email")}:null}}),children:t})}var w=Object(s.createContext)("");function O(e){var t=e.children;return Object(p.jsx)(w.Provider,{value:"/entando-de-app/cmsresources/user-management/",children:t})}var C=n(9),x=n(23),k=n(86),P={en:n(29),it:n(30)},y="translation",A=Object.keys(P).reduce((function(e,t){return Object(a.a)(Object(a.a)({},e),{},Object(C.a)({},t,Object(C.a)({},y,P[t])))}),{}),S=(x.a.t,function(e){!function(e,t){console.log("In i8n: ".concat(e," and defaultlocale ").concat(t)),x.a.use(k.a).init({defaultNs:y,interpolation:{escapeValue:!1},resources:A,lng:e||t,fallbackLng:t,react:{useSuspense:!1}})}(e,"en")}),M=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e,a){var o;return Object(i.a)(this,n),(o=t.call(this)).attributez=e,o.clazz=a,o}return Object(o.a)(n,[{key:"children",get:function(){return null}},{key:"connectedCallback",value:function(){this.mountPoint=document.createElement("div"),this.appendChild(this.mountPoint),this.render()}},{key:"attributeChangedCallback",value:function(e,t,n){if(!this.clazz.observedAttributes.includes(e))throw new Error("Untracked changed attribute: ".concat(e));this.mountPoint&&n!==t&&this.render()}},{key:"getAllAttributes",value:function(){var e=this,t={};return Object.entries(this.attributez).forEach((function(n){var a=Object(d.a)(n,2),i=a[0],o=a[1];t[i]=e.getAttribute(o)})),t}},{key:"render",value:function(){var e=this.getAttribute("locale");S(e),f.a.render(Object(p.jsx)(j,{children:Object(p.jsx)(O,{children:this.children})}),this.mountPoint)}}]),n}(Object(u.a)(HTMLElement)),N=n(3),L=n.n(N),V=n(16),T=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).domain="meet.jit.si/digital-workplace",a.api={},a.startMeet=function(){var e=a.context.user,t={roomName:a.state.room,width:"100%",height:500,parentNode:document.querySelector("#jitsi-container"),userInfo:{displayName:e.preferredName,password:"abcd"},enableClosePage:!1,enableWelcomePage:!1};a.api=new window.JitsiMeetExternalAPI(a.domain,t),a.api.addEventListeners({readyToClose:a.handleClose,participantLeft:a.handleParticipantLeft,participantJoined:a.handleParticipantJoined,videoConferenceJoined:a.handleVideoConferenceJoined,videoConferenceLeft:a.handleVideoConferenceLeft,audioMuteStatusChanged:a.handleMuteStatus,videoMuteStatusChanged:a.handleVideoStatus,participantRoleChanged:a.handleRoleChanged}),a.api.on("passwordRequired",a.handlePasswordRequired)},a.handlePasswordRequired=function(){var e=a.state.roomPassword;a.api.executeCommand("password",e)},a.handleRoleChanged=function(e){var t=a.state.roomPassword;"moderator"===e.role&&a.api.executeCommand("password",t)},a.handleClose=function(){console.log("handleClose")},a.handleParticipantLeft=function(){var e=Object(V.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleParticipantLeft",t),e.next=3,a.getParticipants();case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleParticipantJoined=function(){var e=Object(V.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleParticipantJoined",t),e.next=3,a.getParticipants();case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleVideoConferenceJoined=function(){var e=Object(V.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleVideoConferenceJoined",t),e.next=3,a.getParticipants();case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleVideoConferenceLeft=function(){console.log("handleVideoConferenceLeft");var e=a.state.redirectUrl;window.location.replace(e)},a.handleMuteStatus=function(e){console.log("handleMuteStatus",e)},a.handleVideoStatus=function(e){console.log("handleVideoStatus",e)},a.state={room:"",roomPassword:"",isAudioMuted:!1,isVideoMuted:!1,listenersInitiated:!1,redirectUrl:""},a}return Object(o.a)(n,[{key:"getParticipants",value:function(){var e=this;return new Promise((function(t,n){setTimeout((function(){t(e.api.getParticipantsInfo())}),500)}))}},{key:"executeCommand",value:function(e){this.api.executeCommand(e),"toggleAudio"==e&&this.setState({isAudioMuted:!this.state.isAudioMuted}),"toggleVideo"==e&&this.setState({isVideoMuted:!this.state.isVideoMuted})}},{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(window.location.search),n=t.get("redirectUrl"),a=t.get("r"),i=t.get("p");this.setState({redirectUrl:n,room:a,roomPassword:i},(function(){console.log(e.state)}))}},{key:"componentDidUpdate",value:function(){var e=this.context,t=this.state.listenersInitiated;if(e&&e.initialized&&e.authenticated&&!t)return window.JitsiMeetExternalAPI?this.startMeet():alert("JitsiMeetExternalAPI not loaded"),this.setState({listenersInitiated:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isAudioMuted,a=t.isVideoMuted;return Object(p.jsxs)("div",{className:"card video-widget",children:[Object(p.jsx)("div",{id:"jitsi-container"}),Object(p.jsx)("div",{className:"item-center"}),Object(p.jsxs)("div",{className:"item-center",children:[Object(p.jsx)("span",{children:"\xa0\xa0"}),Object(p.jsx)("i",{onClick:function(){return e.executeCommand("toggleAudio")},className:"fas fa-2x grey-color ".concat(n?"fa-microphone-slash":"fa-microphone"),"aria-hidden":"true",title:"Mute / Unmute"}),Object(p.jsx)("i",{onClick:function(){return e.executeCommand("hangup")},className:"fas fa-phone-slash fa-2x red-color","aria-hidden":"true",title:"Leave"}),Object(p.jsx)("i",{onClick:function(){return e.executeCommand("toggleVideo")},className:"fas fa-2x grey-color ".concat(a?"fa-video-slash":"fa-video"),"aria-hidden":"true",title:"Start / Stop camera"}),Object(p.jsx)("i",{onClick:function(){return e.executeCommand("toggleShareScreen")},className:"fas fa-film fa-2x grey-color","aria-hidden":"true",title:"Share your screen"})]})]})}}]),n}(s.Component);T.contextType=g;var E=T,J={locale:"locale",domainLink:"domain-link"},z=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.call(this,J,n)}return Object(o.a)(n,[{key:"children",get:function(){var e=this.getAllAttributes();return Object(p.jsx)(E,Object(a.a)({},e))}}],[{key:"observedAttributes",get:function(){return Object.values(J)}}]),n}(M);z.TAG="video-conferencing-widget",customElements.get(z.TAG)||customElements.define(z.TAG,z)}},[[84,1,2]]]);
//# sourceMappingURL=main.e1e3c37a.chunk.js.map